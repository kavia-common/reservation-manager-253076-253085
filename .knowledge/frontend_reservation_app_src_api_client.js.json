{"is_source_file": true, "format": "JavaScript", "description": "This file provides an API client for making HTTP requests from a frontend application. It includes helpers for building URLs with query parameters, sending JSON requests with normalized error handling, and utilities for accessing environment-based configuration. It includes functions for GET, POST, PATCH, and DELETE HTTP methods, and contains internal logic for error normalization and debug logging.", "external_files": ["fetch"], "external_methods": [], "published": ["getApiBaseUrl", "buildUrl", "get", "post", "patch", "del"], "classes": [], "methods": [{"name": "getApiBaseUrl()", "description": "Returns the API base URL derived from environment variables, with fallback to an empty string, and trims trailing slash.", "scope": "", "scopeKind": ""}, {"name": "buildUrl(path, query)", "description": "Constructs a full URL by combining the base URL with a given path and optional query parameters, encoding them appropriately.", "scope": "", "scopeKind": ""}, {"name": "request(method, path, { query, body, headers } = {})", "description": "Performs an HTTP request with specified method, URL, and options; handles JSON parsing and error normalization.", "scope": "", "scopeKind": ""}, {"name": "normalizeError(error, fallback = {})", "description": "Normalizes any error object into a standard error shape including status, code, message, and details.", "scope": "", "scopeKind": ""}, {"name": "normalizeResponseError(res, payload)", "description": "Extracts and constructs an error object from an HTTP response and its payload, supporting common backend error shapes.", "scope": "", "scopeKind": ""}, {"name": "safeDebug(scope, meta = {})", "description": "Logs debug information safely, avoiding sensitive data, only in debug mode.", "scope": "", "scopeKind": ""}, {"name": "get", "description": "Performs a GET request to a specified path with optional query and headers."}, {"name": "post(path, options = {})", "description": "Performs a POST request with optional query, headers, and body.", "scope": "", "scopeKind": ""}, {"name": "patch(path, options = {})", "description": "Performs a PATCH request with optional query, headers, and body.", "scope": "", "scopeKind": ""}, {"name": "del(path, options = {})", "description": "Performs a DELETE request with optional query, headers, and body.", "scope": "", "scopeKind": ""}, {"name": "normalizePath(p)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "trimTrailingSlash(s)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "normalizeError", "normalizeResponseError", "safeDebug", "buildUrl", "get", "post", "patch", "del"], "search-terms": ["API client", "frontend fetch", "build URL with query", "JSON request helpers", "error normalization", "environment config", "React env variables", "HTTP methods"], "state": 2, "file_id": 16, "knowledge_revision": 37, "git_revision": "", "ctags": [{"_type": "tag", "name": "IS_DEBUG", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^const IS_DEBUG = LOG_LEVEL === \"debug\" || LOG_LEVEL === \"trace\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LOG_LEVEL", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^const LOG_LEVEL = (process.env.REACT_APP_LOG_LEVEL || \"info\").toLowerCase();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "REDACTED", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^const REDACTED = \"[REDACTED]\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^  const base = {$/", "language": "JavaScript", "kind": "class", "scope": "normalizeError", "scopeKind": "class"}, {"_type": "tag", "name": "buildUrl", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^export function buildUrl(path, query) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, query)"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^    code: fallback.code || \"UNKNOWN_ERROR\",$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.base", "scopeKind": "class"}, {"_type": "tag", "name": "del", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^export async function del(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^    details: fallback.details || undefined,$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.base", "scopeKind": "class"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^export function getApiBaseUrl() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^    message: fallback.message || (error && error.message) || \"Unexpected error\",$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.base", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^    method,$/", "language": "JavaScript", "kind": "field", "scope": "request.init", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeError", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^function normalizeError(error, fallback = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(error, fallback = {})"}, {"_type": "tag", "name": "normalizePath", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^function normalizePath(p) {$/", "language": "JavaScript", "kind": "function", "signature": "(p)"}, {"_type": "tag", "name": "normalizeResponseError", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^function normalizeResponseError(res, payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(res, payload)"}, {"_type": "tag", "name": "patch", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^export async function patch(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^export async function post(path, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, options = {})"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^async function request(method, path, { query, body, headers } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(method, path, { query, body, headers } = {})"}, {"_type": "tag", "name": "safeDebug", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^function safeDebug(scope, meta = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(scope, meta = {})"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^    status: typeof fallback.status === \"number\" ? fallback.status : 500,$/", "language": "JavaScript", "kind": "property", "scope": "normalizeError.base", "scopeKind": "class"}, {"_type": "tag", "name": "trimTrailingSlash", "path": "/home/kavia/workspace/code-generation/reservation-manager-253076-253085/frontend_reservation_app/src/api/client.js", "pattern": "/^function trimTrailingSlash(s) {$/", "language": "JavaScript", "kind": "function", "signature": "(s)"}], "hash": "5aff9b142005582af0547d8bbaa206e3", "format-version": 4, "code-base-name": "frontend_reservation_app", "filename": "frontend_reservation_app/src/api/client.js", "fields": [{"name": "code: fallback.code || \"UNKNOWN_ERROR\",", "scope": "normalizeError.base", "scopeKind": "class", "description": "unavailable"}, {"name": "details: fallback.details || undefined,", "scope": "normalizeError.base", "scopeKind": "class", "description": "unavailable"}, {"name": "message: fallback.message || (error && error.message) || \"Unexpected error\",", "scope": "normalizeError.base", "scopeKind": "class", "description": "unavailable"}, {"name": "method,", "scope": "request.init", "scopeKind": "class", "description": "unavailable"}, {"name": "status: typeof fallback.status === \"number\" ? fallback.status : 500,", "scope": "normalizeError.base", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"37": ""}]}